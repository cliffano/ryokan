---
- hosts: macmini00

  tasks:

  - name: Ensure dev directory exists
    file: path="{{ home }}/dev/" state=directory mode=0755

  - name: Ensure Jenkins home directory exists
    file: path="{{ home }}/dev/jenkins-home" state=directory mode=0755

  - name: Ensure jenkins-workspace repo is cloned
    ansible.builtin.git:
      repo: 'https://github.com/cliffano/jenkins-workspace'
      dest: "{{ home }}/dev/jenkins-workspace/"
      clone: yes
      update: yes

  - name: Set aliases for Jenkins
    lineinfile: dest={{ home }}/.bashrc line="{{ item }}" state=present backup=no
    with_items:
      - alias jenkins-start='cd {{ home }}/dev/jenkins-workspace/ && JENKINS_HOME={{ home }}/dev/jenkins-home/ make jenkins-start-sans-home'

  # - name: Ensure root Homebrew Cask packages are installed
  #   homebrew_cask: name={{ item }} state=installed
  #   with_items:
  #     - firefox
  #   sudo: yes

  # - name: Ensure data directory exists, used as nightly backup, on Desktop for easy access via GUI
  #   file: path={{ workspace }}/Desktop/data state=directory

  # - name: Set .bashrc
  #   lineinfile: dest={{ home }}/.bashrc line="PATH=/usr/local/bin:$PATH" state=present backup=yes

  # - name: Set .profile
  #   lineinfile: dest={{ home }}/.profile line="{{ item }}" state=present backup=yes
  #   with_items:
  #     - alias transfer-data='rsync -zvr /Volumes/TOSHIBAEXT/data /Volumes/Seagate\ Expansion\ Drive'
  #     # - alias backup-data='rsync -zvr /Volumes/Seagate\ Expansion\ Drive/data ~/Desktop'
